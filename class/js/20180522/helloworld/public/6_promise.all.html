<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<script>

    /*
        回调地狱

        move({
            attr:{
                width:100
            },
            callback(){
                move({
                    attr:{
                        height:100
                    },
                    callback(){
                        move({
                            attr:{
                                top:100
                            },
                            callback(){
                                
                            }
                        })
                    }
                })
            }
        });


        pp.then(function(){
            move({attr:{width:100}})
        }).then(function(){
            move({attr:{height:100}})
        }).then(function(){
            move({attr:{top:100}})
        });

        
        A接口 = name
        B接口 = mobile
        
        C接口 = name + mobile ->


        Promise 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。

        所谓Promise，简单说就是一个容器，里面保存着（通常是一个异步操作）的结果。
        
        只有异步操作的结果，可以决定当前是哪一种状态

        有三种状态：
            pending（进行中）
            fulfilled（已成功）
            rejected（失败）




    */



    





    function p(url){
        return new Promise(function(resolve,reject){
            const img = new Image;//创建一个img元素
            
            img.src = url;//'http://wapfile.desktx.com/pc/160823/bigpic/57bbee05a22f7.jpg';
            img.onload = function(){
                resolve(url);
            }
            img.onerror = function(){
                throw new Error('失败');
                // reject(new Error('失败'));
            }
        });
    }

    let p1 = p('http://wapfile.desktx.com/pc/160823/bigpic/57bbee05a22f7.jpg');
    let p2 = p('http://imgstore.cdn.sogou.com/app/a/100540002/49217612345.jpg');
    // let p3 = p('http://att2.citysbs.com/hangzhou/2014/06/12/13/5714x2447-132436_10961402550676429_e697c8ae89349cd359ae310b7c6be41c.jpg');
    // p1.then(function(url){
    //     console.log(url);
    // });

    Promise.all([p1,p2]).then(function(resolve){
        console.log(resolve);
    }).catch(function(err){
        console.log(1234);
    })




</script>
</body>
</html>